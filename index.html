<script>
  function computerPlay() {
    let rand = Math.floor(Math.random() * 100 % 3);
    switch(rand) {
      case 0:
        return "ROCK";
      case 1:
        return "PAPER";
      case 2:
        return "SCISSORS";
    }
  }

  function playerPlay() {
    let playerSel, userInput;
    while(!["ROCK", "PAPER", "SCISSORS"].includes(userInput)){
      userInput = window.prompt("Enter rock, paper, or scissors...: ");
      userInput = userInput.toLocaleUpperCase();
    }
    return userInput.toLocaleUpperCase();
  }

  function determineWinner(computerSelection, playerSelection) {
    let [cSel, pSel] = [computerSelection, playerSelection];
    let res;

    let cSelNum = (cSel === "ROCK" && pSel !== "ROCK") ? 0 :
        (cSel === "PAPER" && pSel !== "PAPER") ? 1 :
        (cSel === "SCISSORS" && pSel !== "SCISSORS") ? 2 : null;
        // 0 === ROCK, 1 === PAPER, 2 === SCISSORS
    let pSelNum = pSel === "ROCK" ? 0 :
        pSel === "PAPER" ? 1 : 2;
        // 0 === ROCK, 1 === PAPER, 2 === SCISSORS

    switch(cSelNum) {
      case 0:
        switch(pSelNum) {
          case 1: // Rock v. Paper
            console.log(`You win -- ${pSel} beats ${cSel}!`);
            res = "PLAYER";
            break;
          case 2: // Rock v. Scissors
            console.log(`You lose -- ${cSel} beats ${pSel}!`);
            res = "COMPUTER";
        }
        break;
      case 1:
        switch(pSelNum) {
          case 0: // Paper v. Rock
            console.log(`You lose -- ${cSel} beats ${pSel}!`);
            res = "COMPUTER";
            break;
          case 2: // Paper v. Scissors
            console.log(`You win -- ${pSel} beats ${cSel}!`);
            res = "PLAYER";
        }
        break;
      case 2:
        switch(pSelNum) {
          case 0: // Scissors v. Rock
            console.log(`You win -- ${pSel} beats ${cSel}!`);
            res = "PLAYER";
            break;
          case 1: // Scissors v. Paper
            console.log(`You lose -- ${cSel} beats ${pSel}!`);
            res = "COMPUTER";
        }
        break;
      default:
        console.log(`It's a draw -- both picked ${pSel}!`);
        res = "DRAW";
    }
    return res;
  }

  function playRound() {
    return determineWinner(computerPlay(), playerPlay());
  }

  function game() {
    let score = { "player": 0, "computer": 0 };
    for(let i = 0; i < 5; i++) {
      let winner = playRound();
      if(winner === "PLAYER") {
        score.player++;
      } else if(winner === "COMPUTER") {
        score.computer++;
        }
    }
    if(score.computer > score.player) {
      console.log(`Nice try, the computer beat you ${score.computer} - ${score.player}`);
    } else if(score.player > score.computer) {
      console.log(`Well done, you beat the computer ${score.player} - ${score.computer}`);
    } else {
      console.log(`You both played well, its a tie ${score.player} - ${score.computer}`);
    }
  }

 game();
</script>
